// This file has messages related to predictions of containers, pods, and nodes

syntax = "proto3";

package containersai.datahub.predictions;

import "common/common.proto";
import "datahub/predictions/predictions.proto";
import "datahub/resources/types.proto";
import "google/rpc/status.proto";

option go_package = "github.com/containers-ai/api/datahub/predictions";

// Represents a request for creating predictions of containers' metrics data belonging to a pod
message CreatePodPredictionsRequest {
    repeated PodPrediction pod_predictions = 1;
}

// Represents a request for creating predictions of a node metrics data
message CreateNodePredictionsRequest {
    repeated NodePrediction node_predictions = 1;
}

// Represents a request for listing predictions of pods
message ListPodPredictionsRequest {
    resources.NamespacedName namespaced_name = 1;
    common.QueryCondition query_condition = 2;
    int64 granularity = 3;
    int64 fill_days   = 4;
}

// Represents a response for a listing predictions of pods request
message ListPodPredictionsResponse {
    google.rpc.Status status = 1;
    repeated PodPrediction pod_predictions = 2;
}

// Represents a request for listing predictions of nodes
message ListNodePredictionsRequest {
    repeated string node_names = 1;
    common.QueryCondition query_condition = 2;
    int64 granularity = 3;
}

// Represents a response for a listing predictions of nodes request
message ListNodePredictionsResponse {
    google.rpc.Status status = 1;
    repeated NodePrediction node_predictions = 2;
}

/**
 * Service for providing data stored in the backend
 */
service PredictionsService {
    // Used to create predictions of pods
    rpc CreatePodPredictions(CreatePodPredictionsRequest)
        returns (google.rpc.Status) {}

    // Used to create predictions of nodes
    rpc CreateNodePredictions(CreateNodePredictionsRequest)
        returns (google.rpc.Status) {}

    // Used to list pod predictions
    rpc ListPodPredictions(ListPodPredictionsRequest)
        returns (ListPodPredictionsResponse) {}

    // Used to list node predictions
    rpc ListNodePredictions(ListNodePredictionsRequest)
        returns (ListNodePredictionsResponse) {}
}
