// This file has messages related to metrics data of containers, pods, and nodes

syntax = "proto3";

package containersai.datahub.metrics;

import "common/common.proto";
import "datahub/metrics/metrics.proto";
import "datahub/resources/types.proto";
import "google/rpc/status.proto";

option go_package = "github.com/containers-ai/api/datahub/metrics";

// Represents a request for creating metrics data of pods
message CreatePodMetricsRequest {
    repeated PodMetric pod_metrics = 1;
}

// Represents a request for creating metrics data of nodes
message CreateNodeMetricsRequest {
    repeated NodeMetric node_metrics = 1;
}

// Represents a request for listing metrics data of pods
message ListPodMetricsRequest {
    resources.NamespacedName namespaced_name = 1;
    common.QueryCondition query_condition = 2;
}

// Represents a response for a listing pods metrics data request
message ListPodMetricsResponse {
    google.rpc.Status status = 1;
    repeated PodMetric pod_metrics = 2;
}

// Represents a request for listing metrics data of nodes
message ListNodeMetricsRequest {
    repeated string node_names = 1;
    common.QueryCondition query_condition = 2;
}

// Represents a response for a listing nodes metrics request
message ListNodeMetricsResponse {
    google.rpc.Status status = 1;
    repeated NodeMetric node_metrics = 2;
}

/**
 * Service for providing data stored in the backend
 */
service MetricsService {
    // Used to create metrics data of pods
    rpc CreatePodMetrics(CreatePodMetricsRequest)
        returns (google.rpc.Status) {}

    // Used to create metrics data of nodes
    rpc CreateNodeMetrics(CreateNodeMetricsRequest)
        returns (google.rpc.Status) {}

    // Used to list pod metric data
    rpc ListPodMetrics(ListPodMetricsRequest)
        returns (ListPodMetricsResponse) {}

    // Used to list node metric data
    rpc ListNodeMetrics(ListNodeMetricsRequest)
        returns (ListNodeMetricsResponse) {}
}
